p8105_hw2_tp2806
================
Tejashree Prakash
2025-09-29

## Problem 1

Downloading and cleaning data.

``` r
#Download and clean pols data
pols =
  read_csv("data/fivethirtyeight_datasets/pols-month.csv") %>%
  separate(mon, into = c("year", "month", "day"), sep = "-", convert = TRUE) %>%
  mutate(month = month.name[month]) %>% #Convert numbers to month names 
  mutate(president = case_when( #Create case to show gop or dem president 
    prez_gop == 1 ~ "gop",
    prez_dem == 1 ~ "dem"
  )) %>%
  select(-prez_dem, -prez_gop, -day)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
#Download and clean snp data 
snp = 
  read_csv("data/fivethirtyeight_datasets/snp.csv") %>%
  mutate(
    date = mdy(date) #turn into as.date format 
  ) %>%
  separate(date, into = c("year", "month", "day"), sep = "-", convert = TRUE) %>%
  mutate(month = month.name[month]) %>%
  select(year, month, close, -day)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
#Download and clean unemployment data
unemployment = 
  read_csv("data/fivethirtyeight_datasets/unemployment.csv") %>%
  pivot_longer(
    cols = Jan:Dec,
    names_to = "month",
    values_to = "unemployment_percentage"
  ) %>% 
  mutate(
    month = month.name[match(month, month.abb)] #change abbreviated month names to full month names
  ) %>%
  rename(year = Year) #make the capitalization of columns consistent 
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Merging all the datasets together.

``` r
#Merge datasets - starting with snp into pols 
merge <- 
  left_join(pols, snp, by = join_by(year, month)) #want to join by both year and month

final_merge <- 
  left_join(merge, unemployment, by = join_by(year, month)) 

knitr::kable(head(final_merge,15))
```

| year | month | gov_gop | sen_gop | rep_gop | gov_dem | sen_dem | rep_dem | president | close | unemployment_percentage |
|---:|:---|---:|---:|---:|---:|---:|---:|:---|---:|---:|
| 1947 | January | 23 | 51 | 253 | 23 | 45 | 198 | dem | NA | NA |
| 1947 | February | 23 | 51 | 253 | 23 | 45 | 198 | dem | NA | NA |
| 1947 | March | 23 | 51 | 253 | 23 | 45 | 198 | dem | NA | NA |
| 1947 | April | 23 | 51 | 253 | 23 | 45 | 198 | dem | NA | NA |
| 1947 | May | 23 | 51 | 253 | 23 | 45 | 198 | dem | NA | NA |
| 1947 | June | 23 | 51 | 253 | 23 | 45 | 198 | dem | NA | NA |
| 1947 | July | 23 | 51 | 253 | 23 | 45 | 198 | dem | NA | NA |
| 1947 | August | 23 | 51 | 253 | 23 | 45 | 198 | dem | NA | NA |
| 1947 | September | 23 | 51 | 253 | 23 | 45 | 198 | dem | NA | NA |
| 1947 | October | 23 | 51 | 253 | 23 | 45 | 198 | dem | NA | NA |
| 1947 | November | 24 | 51 | 253 | 23 | 45 | 198 | dem | NA | NA |
| 1947 | December | 24 | 51 | 253 | 23 | 45 | 198 | dem | NA | NA |
| 1948 | January | 22 | 53 | 253 | 24 | 48 | 198 | dem | NA | 3.4 |
| 1948 | February | 22 | 53 | 253 | 24 | 48 | 198 | dem | NA | 3.8 |
| 1948 | March | 22 | 53 | 253 | 24 | 48 | 198 | dem | NA | 4.0 |

The ‘snp’ dataset contains 787 observations and 2 variables - the date
and the closing values of the S&P stock index on that date. The
‘unemployment’ dataset was converted to long form, now containing
unemployment percentage according to each year and month. The ‘pols’
dataset contains 822 observations and 9 variables - the key variables
include month, year, and party of the president elect. The resulting
dataset, after merging, reflects the base structure for the pols
dataset, with the unique columns from ‘snp’ and ‘unemployment’ added
onto it based on matching month and year. Therefore, any values from
‘snp’ and ‘unemployment’ that did not have a corresponding month/year
with ‘pols’ was not included in the final dataset. The years in this
final dataset range from 1947 to 2015.

## Problem 2

Downloading and cleaning data.

``` r
#Download and clean Mr. Trash Wheel dataset
mr_trash <- 
  read_excel("data/trash_wheel_data_update.xlsx", 
             sheet = "Mr. Trash Wheel",
             range = "A2:N710") %>%
  janitor::clean_names() %>%
  filter(!is.na(dumpster)) %>% #remove the rows that don't have dumpster info
  mutate(
    sports_balls = as.integer(round(sports_balls)) #convert sports balls column 
  ) %>%
  mutate(
    identity = "mr", #tag what original dataframe is
    year = as.numeric(year)
  )
knitr::kable(head(mr_trash,10))
```

| dumpster | month | year | date | weight_tons | volume_cubic_yards | plastic_bottles | polystyrene | cigarette_butts | glass_bottles | plastic_bags | wrappers | sports_balls | homes_powered | identity |
|---:|:---|---:|:---|---:|---:|---:|---:|---:|---:|---:|---:|---:|---:|:---|
| 1 | May | 2014 | 2014-05-16 | 4.31 | 18 | 1450 | 1820 | 126000 | 72 | 584 | 1162 | 7 | 0 | mr |
| 2 | May | 2014 | 2014-05-16 | 2.74 | 13 | 1120 | 1030 | 91000 | 42 | 496 | 874 | 5 | 0 | mr |
| 3 | May | 2014 | 2014-05-16 | 3.45 | 15 | 2450 | 3100 | 105000 | 50 | 1080 | 2032 | 6 | 0 | mr |
| 4 | May | 2014 | 2014-05-17 | 3.10 | 15 | 2380 | 2730 | 100000 | 52 | 896 | 1971 | 6 | 0 | mr |
| 5 | May | 2014 | 2014-05-17 | 4.06 | 18 | 980 | 870 | 120000 | 72 | 368 | 753 | 7 | 0 | mr |
| 6 | May | 2014 | 2014-05-20 | 2.71 | 13 | 1430 | 2140 | 90000 | 46 | 672 | 1144 | 5 | 0 | mr |
| 7 | May | 2014 | 2014-05-21 | 1.91 | 8 | 910 | 1090 | 56000 | 32 | 416 | 692 | 3 | 0 | mr |
| 8 | May | 2014 | 2014-05-28 | 3.70 | 16 | 3580 | 4310 | 112000 | 58 | 1552 | 3015 | 6 | 0 | mr |
| 9 | June | 2014 | 2014-06-05 | 2.52 | 14 | 2400 | 2790 | 98000 | 49 | 984 | 1988 | 6 | 0 | mr |
| 10 | June | 2014 | 2014-06-11 | 3.76 | 18 | 1340 | 1730 | 130000 | 75 | 448 | 1066 | 7 | 0 | mr |

``` r
#Download and clean Professor Trash Wheel dataset
prof_trash <- 
  read_excel("data/trash_wheel_data_update.xlsx", 
             sheet = "Professor Trash Wheel",
             range = "A2:M123") %>%
  janitor::clean_names() %>%
  filter(!is.na(dumpster)) %>%
  mutate(
    identity = "prof", #tag what original dataframe is
    year = as.numeric(year)
  )
knitr::kable(head(prof_trash,10))
```

| dumpster | month | year | date | weight_tons | volume_cubic_yards | plastic_bottles | polystyrene | cigarette_butts | glass_bottles | plastic_bags | wrappers | homes_powered | identity |
|---:|:---|---:|:---|---:|---:|---:|---:|---:|---:|---:|---:|---:|:---|
| 1 | January | 2017 | 2017-01-02 | 1.79 | 15 | 1950 | 6080 | 19700 | 8 | 3100 | 15600 | 29.83333 | prof |
| 2 | January | 2017 | 2017-01-30 | 1.58 | 15 | 9540 | 11230 | 17600 | 14 | 5630 | 16700 | 26.33333 | prof |
| 3 | February | 2017 | 2017-02-26 | 2.32 | 18 | 8350 | 9210 | 12000 | 19 | 6430 | 12400 | 38.66667 | prof |
| 4 | February | 2017 | 2017-02-26 | 3.72 | 15 | 8590 | 1030 | 13000 | 21 | 5870 | 11030 | 62.00000 | prof |
| 5 | February | 2017 | 2017-02-28 | 1.45 | 15 | 7830 | 9950 | 16000 | 18 | 7450 | 15340 | 24.16667 | prof |
| 6 | March | 2017 | 2017-03-30 | 1.71 | 15 | 8210 | 10340 | 14000 | 23 | 9560 | 13470 | 28.50000 | prof |
| 7 | April | 2017 | 2017-04-01 | 1.82 | 15 | 9830 | 11020 | 17000 | 26 | 11500 | 18620 | 30.33333 | prof |
| 8 | April | 2017 | 2017-04-20 | 2.37 | 15 | 9240 | 8760 | 15000 | 14 | 9970 | 14670 | 39.50000 | prof |
| 9 | May | 2017 | 2017-05-10 | 2.64 | 15 | 9540 | 8810 | 17000 | 28 | 12340 | 16580 | 44.00000 | prof |
| 10 | May | 2017 | 2017-05-26 | 2.78 | 15 | 8230 | 7800 | 13000 | 22 | 13450 | 17220 | 46.33333 | prof |

``` r
#Download and clean Gwynns Falls Trash Wheel dataset
gwynn_trash <- 
    read_excel("data/trash_wheel_data_update.xlsx", 
             sheet = "Gwynns Falls Trash Wheel",
             range = "A2:L352") %>%
  janitor::clean_names() %>%
  filter(!is.na(dumpster)) %>%
  mutate(
    identity = "gwynn", #tag what original dataframe is
    year = as.numeric(year)
  )
knitr::kable(head(gwynn_trash,10))
```

| dumpster | month | year | date | weight_tons | volume_cubic_yards | plastic_bottles | polystyrene | cigarette_butts | plastic_bags | wrappers | homes_powered | identity |
|---:|:---|---:|:---|---:|---:|---:|---:|---:|---:|---:|---:|:---|
| 1 | July | 2021 | 2021-07-03 | 0.93 | 15 | 1200 | 360 | 3400 | 1800 | NA | 15.50000 | gwynn |
| 2 | July | 2021 | 2021-07-07 | 2.26 | 15 | 2000 | 240 | 3900 | 2200 | NA | 37.66667 | gwynn |
| 3 | July | 2021 | 2021-07-07 | 1.62 | 15 | 1800 | 270 | 2900 | 2400 | NA | 27.00000 | gwynn |
| 4 | July | 2021 | 2021-07-16 | 1.76 | 15 | 1000 | 180 | 2100 | 1800 | NA | 29.33333 | gwynn |
| 5 | July | 2021 | 2021-07-30 | 1.53 | 15 | 2100 | 240 | 4000 | 2700 | NA | 25.50000 | gwynn |
| 6 | August | 2021 | 2021-08-11 | 2.06 | 15 | 2400 | 360 | 3900 | 3000 | NA | 34.33333 | gwynn |
| 7 | August | 2021 | 2021-08-14 | 1.90 | 15 | 2700 | 320 | 4200 | 3200 | NA | 31.66667 | gwynn |
| 8 | August | 2021 | 2021-08-16 | 2.16 | 15 | 3000 | 320 | 4000 | 3600 | NA | 36.00000 | gwynn |
| 9 | August | 2021 | 2021-08-16 | 2.60 | 15 | 980 | 180 | 1800 | 1000 | NA | 43.33333 | gwynn |
| 10 | August | 2021 | 2021-08-17 | 3.21 | 15 | 240 | 42 | 400 | 360 | NA | 53.50000 | gwynn |

Merging the trash datasets.

``` r
#Combine gwyn and prof trash first as they share the same columns. 
trash_wheels <- bind_rows(mr_trash, prof_trash, gwynn_trash)

#Calculate total weight of trash by prof trash
totalweightprof <- prof_trash %>%
  summarise(total_weight = sum(weight_tons, na.rm = TRUE))

#Calculate total cigarette butts by Gwynnda in June 2022
totalcig_gwyn <- gwynn_trash %>%
  filter(year == 2022, month == "June") %>%
  summarise(total_cigs = sum(cigarette_butts, na.rm = TRUE))

knitr::kable(head(trash_wheels,15))
```

| dumpster | month | year | date | weight_tons | volume_cubic_yards | plastic_bottles | polystyrene | cigarette_butts | glass_bottles | plastic_bags | wrappers | sports_balls | homes_powered | identity |
|---:|:---|---:|:---|---:|---:|---:|---:|---:|---:|---:|---:|---:|---:|:---|
| 1 | May | 2014 | 2014-05-16 | 4.31 | 18 | 1450 | 1820 | 126000 | 72 | 584 | 1162 | 7 | 0 | mr |
| 2 | May | 2014 | 2014-05-16 | 2.74 | 13 | 1120 | 1030 | 91000 | 42 | 496 | 874 | 5 | 0 | mr |
| 3 | May | 2014 | 2014-05-16 | 3.45 | 15 | 2450 | 3100 | 105000 | 50 | 1080 | 2032 | 6 | 0 | mr |
| 4 | May | 2014 | 2014-05-17 | 3.10 | 15 | 2380 | 2730 | 100000 | 52 | 896 | 1971 | 6 | 0 | mr |
| 5 | May | 2014 | 2014-05-17 | 4.06 | 18 | 980 | 870 | 120000 | 72 | 368 | 753 | 7 | 0 | mr |
| 6 | May | 2014 | 2014-05-20 | 2.71 | 13 | 1430 | 2140 | 90000 | 46 | 672 | 1144 | 5 | 0 | mr |
| 7 | May | 2014 | 2014-05-21 | 1.91 | 8 | 910 | 1090 | 56000 | 32 | 416 | 692 | 3 | 0 | mr |
| 8 | May | 2014 | 2014-05-28 | 3.70 | 16 | 3580 | 4310 | 112000 | 58 | 1552 | 3015 | 6 | 0 | mr |
| 9 | June | 2014 | 2014-06-05 | 2.52 | 14 | 2400 | 2790 | 98000 | 49 | 984 | 1988 | 6 | 0 | mr |
| 10 | June | 2014 | 2014-06-11 | 3.76 | 18 | 1340 | 1730 | 130000 | 75 | 448 | 1066 | 7 | 0 | mr |
| 11 | June | 2014 | 2014-06-11 | 3.43 | 15 | 740 | 869 | 110000 | 38 | 344 | 544 | 6 | 0 | mr |
| 12 | June | 2014 | 2014-06-12 | 4.17 | 19 | 950 | 1140 | 133000 | 45 | 520 | 727 | 8 | 0 | mr |
| 13 | June | 2014 | 2014-06-13 | 5.13 | 15 | 530 | 630 | 104000 | 58 | 224 | 361 | 6 | 0 | mr |
| 14 | June | 2014 | 2014-06-13 | 4.17 | 15 | 840 | 760 | 100000 | 62 | 344 | 631 | 6 | 0 | mr |
| 15 | June | 2014 | 2014-06-19 | 3.28 | 15 | 1130 | 1350 | 102000 | 64 | 432 | 883 | 6 | 0 | mr |

After cleaning the data sets, I noticed that not all of the datasets had
the same columns. For example, “Mr. Trash Wheel” contains the column
“sports balls”, whereas the other two datasets do not contain that
variable. The merged dataset has 1177 observations. Key variables
include: weight of trash collected, cigarette butts collected, plastic
bottles, and the original dataset identifier. The total weight of trash
collected by Professor Trash Wheel is 255.67. The total cigarette butts
collected by Gwynnda in June 2022 is 1.812^{4}.

## Problem 3
